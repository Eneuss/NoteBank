https://www.figma.com/design/XuWqoYv9Edpwo4RO7HWf0e/Untitled?node-id=0-1&t=YpVsSCLoOSr31flH-1


figd_odE2fntWJPwr1GiyAZGTvvlArufaGNKHvHfpHaX8

CREATE TABLE Branches (
    BranchID INTEGER PRIMARY KEY AUTOINCREMENT,
    BranchName TEXT NOT NULL,
    Address TEXT,
    City TEXT,
    TotalBalance REAL
);

-- Table: Staff
CREATE TABLE Staff (
    StaffID INTEGER PRIMARY KEY AUTOINCREMENT,
    FirstName TEXT NOT NULL,
    LastName TEXT NOT NULL,
    Dob DATE,
    Role TEXT,
    Salary REAL,
    HireDate DATE,
    BranchID INT,
    Email TEXT,
    FOREIGN KEY (BranchID) REFERENCES Branches(BranchID)
);

-- Table: Users
CREATE TABLE Users (
    UserID INTEGER PRIMARY KEY AUTOINCREMENT,
    FirstName TEXT NOT NULL,
    LastName TEXT NOT NULL,
    Dob DATE,
    Email TEXT NOT NULL,
    Address TEXT NOT NULL,
    WorkType TEXT NOT NULL,
    BranchID INT,
    Password TEXT NOT NULL,
    FOREIGN KEY (BranchID) REFERENCES Branches(BranchID)
);

-- Table: Accounts
CREATE TABLE Accounts (
    AccountID INTEGER PRIMARY KEY AUTOINCREMENT,
    UserID INT,
    IBAN TEXT NOT NULL UNIQUE,
    Balance REAL DEFAULT 0,
    OpenDate DATE,
    Image BLOB,
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

-- Table: Loans
CREATE TABLE Loans (
    LoanID INTEGER PRIMARY KEY AUTOINCREMENT,
    AccountID INT,
    Amount REAL NOT NULL,
    InterestRate REAL NOT NULL,
    StartDate DATE,
    EndDate DATE,
    Status TEXT,
    FOREIGN KEY (AccountID) REFERENCES Accounts(AccountID)
);

-- Table: CreditCard
CREATE TABLE CreditCard (
    CardID INTEGER PRIMARY KEY AUTOINCREMENT,
    AccountID INT,
    CardNumber TEXT NOT NULL UNIQUE,
    ExpiryDate TEXT NOT NULL,
    CVV TEXT NOT NULL,
    CreditLimit REAL,
    FOREIGN KEY (AccountID) REFERENCES Accounts(AccountID)
);

-- Table: CustomerSupport
CREATE TABLE CustomerSupport (
    SupportID INTEGER PRIMARY KEY AUTOINCREMENT,
    AccountID INT,
    StaffID INT,
    Date DATE,
    Issue TEXT,
    Status TEXT,
    FOREIGN KEY (AccountID) REFERENCES Accounts(AccountID),
    FOREIGN KEY (StaffID) REFERENCES Staff(StaffID)
);

-- Table: Transactions
CREATE TABLE Transactions (
    TransactionID INTEGER PRIMARY KEY AUTOINCREMENT,
    AccountID INT,
    Amount REAL NOT NULL,
    Recipient TEXT NOT NULL,
    Description TEXT,
    Date DATE,
    FOREIGN KEY (AccountID) REFERENCES Accounts(AccountID)
);



CREATE TRIGGER UpdateBranchBalance
AFTER UPDATE ON Accounts
FOR EACH ROW
BEGIN
    UPDATE Branches
    SET TotalBalance = (SELECT SUM(Balance) FROM Accounts WHERE UserID IN 
                        (SELECT UserID FROM Users WHERE BranchID = NEW.UserID))
    WHERE BranchID = (SELECT BranchID FROM Users WHERE UserID = NEW.UserID);
END;



CREATE TRIGGER create_account_after_user_insert
AFTER INSERT ON Users
FOR EACH ROW
BEGIN
    -- Insert a new account associated with the newly created user
    INSERT INTO Accounts (UserID, IBAN, OpenDate)
    VALUES (NEW.UserID, 'IBAN' || strftime('%Y%m%d%H%M%S', 'now'), DATE('now'));
END;




1. Branches Table:
BranchID	BranchName	Address	City	TotalBalance
1	Main Branch	123 Main St.	New York	1000000.00
2	East Branch	456 East Ave.	Los Angeles	750000.00
3	West Branch	789 West Blvd.	San Francisco	500000.00
4	South Branch	101 South Rd.	Miami	300000.00
5	North Branch	202 North Dr.	Chicago	450000.00

2. Staff Table:
StaffID	FirstName	LastName	Dob	Role	Salary	HireDate	BranchID	Email
1	John	Doe	1985-05-15	Manager	55000	2015-03-01	1	john.doe@example.com
2	Jane	Smith	1990-07-25	Cashier	35000	2018-07-01	2	jane.smith@example.com
3	Tom	Johnson	1982-11-10	Clerk	40000	2017-02-20	3	tom.johnson@example.com
4	Alice	Williams	1988-04-05	Manager	60000	2014-06-15	4	alice.williams@example.com
5	Bob	Brown	1992-01-20	Cashier	37000	2019-10-15	5	bob.brown@example.com

3. Users Table:
UserID	FirstName	LastName	Dob	Email	Address	WorkType	BranchID	Password
1	Michael	Davis	1993-08-12	michael.davis@example.com	123 Elm St.	Full-time	1	password123
2	Sarah	Miller	1986-09-30	sarah.miller@example.com	456 Oak St.	Part-time	2	mypassword
3	Chris	Wilson	1995-02-19	chris.wilson@example.com	789 Pine St.	Freelancer	3	securepass
4	Laura	Taylor	1980-11-10	laura.taylor@example.com	101 Maple Rd.	Full-time	4	taylor123
5	David	Anderson	1989-05-25	david.anderson@example.com	202 Cedar Dr.	Part-time	5	andersonpass

4. Accounts Table:
AccountID	UserID	IBAN	Balance	OpenDate	Image
1	1	IBAN20230101010101	5000.00	2023-01-01	NULL
2	2	IBAN20230101010201	2000.00	2023-01-02	NULL
3	3	IBAN20230101010301	3000.00	2023-01-03	NULL
4	4	IBAN20230101010401	1000.00	2023-01-04	NULL
5	5	IBAN20230101010501	1500.00	2023-01-05	NULL

5. Loans Table:
LoanID	AccountID	Amount	InterestRate	StartDate	EndDate	Status
1	1	10000.00	5.5	2023-01-01	2024-01-01	Active
2	2	5000.00	6.0	2023-02-01	2024-02-01	Active
3	3	15000.00	4.5	2023-03-01	2024-03-01	Active
4	4	8000.00	5.0	2023-04-01	2024-04-01	Completed
5	5	12000.00	5.2	2023-05-01	2024-05-01	Active

6. CreditCard Table:
CardID	AccountID	CardNumber	ExpiryDate	CVV	CreditLimit
1	1	1234567890123456	12/25	123	5000.00
2	2	2345678901234567	11/24	456	3000.00
3	3	3456789012345678	10/23	789	4000.00
4	4	4567890123456789	09/22	012	1000.00
5	5	5678901234567890	08/23	345	2000.00

7. CustomerSupport Table:
SupportID	AccountID	StaffID	Date	Issue	Status
1	1	1	2023-06-01	Unable to login	Resolved
2	2	2	2023-06-05	Lost card	In Progress
3	3	3	2023-06-10	Incorrect charge	Resolved
4	4	4	2023-06-12	Account locked	In Progress
5	5	5	2023-06-15	Transaction error	Resolved

8. Transactions Table:
TransactionID	AccountID	Amount	Recipient	Description	Date
1	1	500.00	John Doe	Payment for services	2023-06-01
2	2	150.00	Jane Smith	Refund for transaction	2023-06-02
3	3	300.00	Tom Johnson	Purchase of office supplies	2023-06-03
4	4	120.00	Alice Williams	Repayment of loan	2023-06-04
5	5	250.00	Bob Brown	Transfer to savings	2023-06-05
